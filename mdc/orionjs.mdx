---
description: Writing serverside code using the Orionjs Framework best practices
globs: *.ts
alwaysApply: true
---

### Basic Principles

- Use component-based architecture.
- Encapsulate functionality in components.
  - One component per main domain.
  - Each component should contain:
    - Controllers for request handling
    - Schemas for data models
    - Services for business logic
    - Repositories for data access
- Prefer usage of resolvers or trpc procedures instead of routes.
- Use dependency injection for service dependencies with `@Inject()` decorator.
- Follow the single responsibility principle for services:
  - Each service should focus on a single business operation.
  - Service should typically have one main public method.
- Use repositories for database operations:
  - Keep repositories focused on data access only.
  - Follow naming convention: `{EntityNameInPlural}Repo`.
  - Separate data access from business logic.
- Handle validation and error cases appropriately.
  - Prefer throwing `ValidationError` when validation of data fails.
  - Prefer throwing `UserError` when the error is not a system error.

### Logging

- All logs should be make using the library @orion-js/logger
- Levels could be info, warn or error
```ts
import {logger} from '@orion-js/logger'
// the first argument must always be a static string, all variables should be at the object in the second argument 
logger.info('', {a: b})
// when logging error, the error must be in a parameter at the object at the second argument
logger.error('Error...', {error, a: b})
```
